{
    "type": "Ext.container.Container",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|initialView": true,
        "designer|userClassName": "DesignDiagramMainContainer",
        "height": 513,
        "id": "DesignDiagramMainContainer",
        "itemId": "DesignDiagramMainContainer",
        "layout": "border",
        "width": 793
    },
    "designerId": "87b2bec1-4542-45e2-b5f8-8a152119a07d",
    "cn": [
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretchmax",
                "layout": "vbox",
                "layout|flex": null,
                "layout|region": "west",
                "layout|split": true,
                "title": "Структура",
                "width": null
            },
            "name": "MyPanel2",
            "designerId": "1dac80a0-e259-42fc-ab14-5b319132f482",
            "cn": [
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "autoScroll": true,
                        "dock": "top",
                        "height": "",
                        "itemId": "StructureToolBar"
                    },
                    "name": "MyToolbar",
                    "designerId": "440974fc-ed6f-44e4-9e5b-b3440ed07053",
                    "cn": [
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "frame": false,
                                "height": null,
                                "html": null,
                                "iconCls": "cls_add",
                                "itemId": "BtnAdd",
                                "layout|flex": null,
                                "text": "",
                                "tooltip": "Добавить",
                                "width": null
                            },
                            "name": "MyButton",
                            "configAlternates": {
                                "tooltip": "string"
                            },
                            "designerId": "c3265221-bcdd-4492-86b6-404d9fc46bad",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "html",
                                    "type": "string"
                                }
                            ],
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var NodeToInsert, IndexInsert;",
                                            "var mainContainer= button.findParentByType('#DesignDiagramMainContainer');",
                                            "var StructureTree= mainContainer.down('#StructureTree') ;",
                                            "var Node= StructureTree.getSelectionModel().getSelection();",
                                            "var ConfigObject={text: mainContainer.MICaption_Chart, expanded: false, leaf:true,children: null,",
                                            "                  ItemType: 'chart',",
                                            "                  iconCls: 'query',",
                                            "                  Description: mainContainer.MICaption_Chart,",
                                            "                  graph_name_style:'',",
                                            "                  graph_style:'',",
                                            "                  graph_color:'',",
                                            "                  graph_ref:'',",
                                            "                  SQL: '',",
                                            "                  Limit: 0",
                                            "                 };",
                                            "if(Node!= undefined){",
                                            "    Node=Node[0];",
                                            "    if((Node!= undefined)){",
                                            "        if(Node.raw.ItemType=='diagram'){",
                                            "            IndexInsert=0;",
                                            "            NodeToInsert=Node;",
                                            "        } else if(Node.raw.ItemType=='chart'){",
                                            "            IndexInsert =Node.parentNode.indexOf(Node)+1;",
                                            "            NodeToInsert=Node.parentNode;",
                                            "        } else",
                                            "            return;",
                                            "    }else{",
                                            "        NodeToInsert=StructureTree.getRootNode();",
                                            "        IndexInsert =0;}",
                                            "}else{",
                                            "    NodeToInsert=StructureTree.getRootNode();",
                                            "    IndexInsert =0;}",
                                            "NodeToInsert.insertChild(IndexInsert, ConfigObject);",
                                            "",
                                            "var mainContainer = button.findParentByType('#DesignDiagramMainContainer');",
                                            "mainContainer.modified=true;",
                                            "",
                                            "StructureTree.store.sync();"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "a571e492-af27-4a3c-8570-502f19e7780c"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "disabled": true,
                                "iconCls": "cls_del",
                                "itemId": "BtnDel",
                                "layout|flex": null,
                                "text": "",
                                "tooltip": "Удалить"
                            },
                            "name": "MyButton1",
                            "configAlternates": {
                                "tooltip": "string"
                            },
                            "designerId": "b7735aa5-7446-4255-a555-06a2038e3a1b",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var StructureTree= button. findParentByType('#DesignDiagramMainContainer').down('#StructureTree') ;",
                                            "var Node= StructureTree.getSelectionModel().getSelection();",
                                            "if(Node!= undefined){",
                                            "    Node=Node[0];",
                                            "    if((Node!= undefined)&&(Node!=StructureTree.getRootNode())){",
                                            "        var Node2Select= Node.previousSibling;",
                                            "        if(Node2Select==undefined){Node2Select= Node.parentNode;}",
                                            "        try {",
                                            "            Node.removeAll(true);",
                                            "            ",
                                            "var mainContainer = button.findParentByType('#DesignDiagramMainContainer');",
                                            "mainContainer.modified=true;",
                                            "",
                                            "        } catch (e) {",
                                            "        } finally {",
                                            "            try{",
                                            "                Node.remove(true);",
                                            "            } catch (e) {}",
                                            "        }",
                                            "        StructureTree.store.sync();",
                                            "        StructureTree.getSelectionModel().select(Node2Select);",
                                            "    }}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "34dd4340-d4ea-41e9-886a-b73f1b5d2c7f"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "disabled": true,
                                "iconCls": "cls_cut",
                                "itemId": "BtnCut",
                                "layout|flex": null,
                                "text": "",
                                "tooltip": "Вырезать"
                            },
                            "name": "MyButton2",
                            "configAlternates": {
                                "tooltip": "string"
                            },
                            "designerId": "e1550707-3898-4f64-a2ae-3de5ece6d14e",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var mainContainer= button.findParentByType('#DesignDiagramMainContainer');",
                                            "var BtnCopy= mainContainer.down('#BtnCopy') ;",
                                            "var BtnDel= mainContainer.down('#BtnDel') ;",
                                            "if(BtnCopy.handler(button)==true){",
                                            "    BtnDel.handler(button);",
                                            "}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "bb2709aa-7b8a-42bf-873a-19613bad7b74"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "disabled": true,
                                "iconCls": "cls_copy",
                                "itemId": "BtnCopy",
                                "layout|flex": null,
                                "text": "",
                                "tooltip": "Копировать"
                            },
                            "name": "MyButton3",
                            "configAlternates": {
                                "tooltip": "string"
                            },
                            "designerId": "bda12826-290a-4071-8769-835de3c85c86",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "function GetConfObj(Node){",
                                            "    var result= CopyObjectProps(Node.raw);",
                                            "    if(Node.hasChildNodes( )==true){",
                                            "        result.children= [];",
                                            "        Ext.each(Node.childNodes, function (Child) {",
                                            "            var itm= GetConfObj(Child);",
                                            "            result.children.push(itm);",
                                            "        });",
                                            "    }else result.children=null;",
                                            "    return result;",
                                            "}",
                                            "",
                                            "var mainContainer= button.findParentByType('#DesignDiagramMainContainer');",
                                            "var StructureTree= mainContainer.down('#StructureTree') ;",
                                            "var Node= StructureTree.getSelectionModel().getSelection();",
                                            "if(Node!= undefined){",
                                            "    Node=Node[0];",
                                            "    if((Node!= undefined)&&(Node!=StructureTree.getRootNode())){",
                                            "        Ext.destroy(mainContainer.ClipboardItem);",
                                            "        mainContainer.ClipboardItem=null;",
                                            "        mainContainer.ClipboardItem=GetConfObj(Node);",
                                            "        //mainContainer.down('#ClipboardContentsTxt').setText('В буфере: '+mainContainer.ClipboardItem.text);",
                                            "        return true;",
                                            "    }}"
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "83809701-a698-4553-9ffd-67aed03281e0"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "disabled": true,
                                "iconCls": "cls_paste",
                                "itemId": "BtnPaste",
                                "layout|flex": null,
                                "text": "",
                                "tooltip": "Вставить"
                            },
                            "name": "MyButton4",
                            "configAlternates": {
                                "tooltip": "string"
                            },
                            "designerId": "be031ac7-3664-4e86-96d6-e6590a527545",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var NodeToInsert, IndexInsert;",
                                            "var mainContainer= button.findParentByType('#DesignDiagramMainContainer');",
                                            "var StructureTree= mainContainer.down('#StructureTree') ;",
                                            "var Node= StructureTree.getSelectionModel().getSelection();",
                                            "if(Node!= undefined){",
                                            "    Node=Node[0];",
                                            "    if((Node!= undefined)){",
                                            "        if(Node.raw.ItemType=='diagram'){",
                                            "            IndexInsert=0;",
                                            "            NodeToInsert=Node;",
                                            "        } else if(Node.raw.ItemType=='chart'){",
                                            "            IndexInsert =Node.parentNode.indexOf(Node)+1;",
                                            "            NodeToInsert=Node.parentNode;",
                                            "        } else",
                                            "            return;",
                                            "    }else",
                                            "    {",
                                            "        NodeToInsert=StructureTree.getRootNode();",
                                            "        IndexInsert =0;}",
                                            "}else",
                                            "{",
                                            "    NodeToInsert=StructureTree.getRootNode();",
                                            "    IndexInsert =0;}",
                                            "var ConfObj= CopyObjectProps(mainContainer.ClipboardItem);",
                                            "ConfObj.expanded=false;",
                                            "NodeToInsert.insertChild(IndexInsert, ConfObj);",
                                            "",
                                            "var mainContainer = button.findParentByType('#DesignDiagramMainContainer');",
                                            "mainContainer.modified=true;",
                                            "",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "98c145ce-19d6-4dfd-ab76-5e4db926a5bc"
                                }
                            ]
                        },
                        {
                            "type": "Ext.toolbar.Spacer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "width": 5
                            },
                            "name": "MySpacer",
                            "designerId": "430f3200-c8b0-4346-bd39-f0ac2cc1d3c1"
                        },
                        {
                            "type": "Ext.toolbar.Separator",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "width": null
                            },
                            "name": "MySeparator3",
                            "designerId": "c2650896-0618-4802-be3a-ff11fcb43c59"
                        },
                        {
                            "type": "Ext.toolbar.Spacer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "width": 5
                            },
                            "name": "MySpacer1",
                            "designerId": "0a21b055-5f95-4a3f-9b67-e39f4be8f555"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "BtnParamEditor",
                                "iconCls": "cls_params",
                                "layout|flex": null,
                                "text": "",
                                "tooltip": "Редактировать параметры диаграммы",
                                "width": ""
                            },
                            "name": "MyButton9",
                            "configAlternates": {
                                "tooltip": "string"
                            },
                            "designerId": "cbec30e6-1b23-489c-b868-13add0620d85",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var mainContainer = button.findParentByType('#DesignDiagramMainContainer');",
                                            "",
                                            "var diagram_PropertyForm=mainContainer.ArrayOfReportObjectTypes.diagram;",
                                            "var w=  Ext.create(\"Params.view.EditParams\", {Params: diagram_PropertyForm.rawData.DiagramParams});",
                                            "w.mainContainer= mainContainer;",
                                            "w.addEvents('BtnOk');",
                                            "w.show();",
                                            "w.addListener('BtnOk', function(ReportParams) {",
                                            "    diagram_PropertyForm.rawData.DiagramParams=ReportParams;",
                                            "",
                                            "    var mainContainer = button.findParentByType('#DesignDiagramMainContainer');",
                                            "    mainContainer.modified=true;",
                                            "",
                                            "    CloseWindow(w);",
                                            "});",
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "54ca1a61-1b95-4aa7-adad-4cbc491ddc08"
                                }
                            ]
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|displayName": "BtnPreview",
                                "iconCls": "cls_preview",
                                "layout|flex": null,
                                "text": "",
                                "tooltip": "Предпросмотр"
                            },
                            "name": "MyButton5",
                            "configAlternates": {
                                "tooltip": "string"
                            },
                            "designerId": "a5cee5b1-1591-4043-b799-df6941427fa8",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "button",
                                            "e"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            ""
                                        ]
                                    },
                                    "name": "handler",
                                    "designerId": "542d1e4e-cbca-4c3e-a5c7-5733bd2b6ddb"
                                },
                                {
                                    "type": "Ext.menu.Menu",
                                    "reference": {
                                        "name": "menu",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "width": 200
                                    },
                                    "name": "MyMenu",
                                    "designerId": "7eb22547-6926-4e38-8f2c-02210c909f32",
                                    "cn": [
                                        {
                                            "type": "Ext.menu.Item",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "text": "Отдельный объект"
                                            },
                                            "name": "MyMenuItem",
                                            "designerId": "d18f6645-e646-48eb-8982-bffa29776b32",
                                            "customConfigs": [
                                                {
                                                    "group": "(Custom Properties)",
                                                    "name": "PreviewType",
                                                    "type": "string"
                                                }
                                            ],
                                            "cn": [
                                                {
                                                    "type": "fixedfunction",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "designer|params": [
                                                            "item",
                                                            "e"
                                                        ],
                                                        "fn": "handler",
                                                        "implHandler": [
                                                            "var mainContainer= item.findParentByType('#DesignDiagramMainContainer');",
                                                            "mainContainer.PreviewTemplate(item.PreviewType);",
                                                            ""
                                                        ]
                                                    },
                                                    "name": "handler",
                                                    "designerId": "0eded2db-2408-4672-854b-48d5af8d1711"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.menu.Item",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "PreviewType": "1",
                                                "text": "HTML-страница"
                                            },
                                            "name": "MyMenuItem1",
                                            "designerId": "851184a9-78e4-4d0f-8d25-d4e803df1385",
                                            "customConfigs": [
                                                {
                                                    "group": "(Custom Properties)",
                                                    "name": "PreviewType",
                                                    "type": "string"
                                                }
                                            ],
                                            "cn": [
                                                {
                                                    "type": "fixedfunction",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "designer|params": [
                                                            "item",
                                                            "e"
                                                        ],
                                                        "fn": "handler",
                                                        "implHandler": [
                                                            "var mainContainer= item.findParentByType('#DesignDiagramMainContainer');",
                                                            "mainContainer.PreviewTemplate(item.PreviewType);"
                                                        ]
                                                    },
                                                    "name": "handler",
                                                    "designerId": "196b6e9d-e390-46f9-bc2f-abe219c54a9e"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.menu.Item",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "PreviewType": "2",
                                                "text": "pChart"
                                            },
                                            "name": "MyMenuItem2",
                                            "designerId": "726d527c-3821-43f7-a776-ebb73089bf67",
                                            "customConfigs": [
                                                {
                                                    "group": "(Custom Properties)",
                                                    "name": "PreviewType",
                                                    "type": "string"
                                                }
                                            ],
                                            "cn": [
                                                {
                                                    "type": "fixedfunction",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "designer|params": [
                                                            "item",
                                                            "e"
                                                        ],
                                                        "fn": "handler",
                                                        "implHandler": [
                                                            "var mainContainer= item.findParentByType('#DesignDiagramMainContainer');",
                                                            "mainContainer.PreviewTemplate(item.PreviewType);"
                                                        ]
                                                    },
                                                    "name": "handler",
                                                    "designerId": "4e27323f-cb90-4ade-b8d6-4ce9dbb4163a"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.tree.Panel",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|displayName": null,
                        "dock": "left",
                        "itemId": "StructureTree",
                        "layout|flex": 1,
                        "title": null,
                        "width": 210
                    },
                    "name": "MyTreePanel",
                    "designerId": "3d7354e3-cf7e-4ff2-a5e5-c034af3c0c31",
                    "cn": [
                        {
                            "type": "Ext.tree.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoScroll": true
                            },
                            "name": "MyTreeView",
                            "designerId": "c325cdc3-ea15-4a2d-b440-7986e8c6bf2c",
                            "cn": [
                                {
                                    "type": "Ext.tree.plugin.TreeViewDragDrop",
                                    "reference": {
                                        "name": "plugins",
                                        "type": "array"
                                    },
                                    "codeClass": "Ext.tree.plugin.TreeViewDragDrop",
                                    "name": "MyTreeDragDropPlugin",
                                    "designerId": "2e24abcb-adc8-45ad-9b83-c58ee2eaad39"
                                }
                            ]
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onStructureTreeAfterRender",
                                "implHandler": [
                                    "component.getView().select(component.getRootNode());"
                                ],
                                "name": "afterrender",
                                "scope": "me"
                            },
                            "name": "onStructureTreeAfterRender",
                            "designerId": "b0bd7308-158f-4941-9520-02e8beda6398"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "itemId": "PropPanel",
                "layout": "fit",
                "layout|flex": 1,
                "layout|region": "center"
            },
            "name": "MyPanel",
            "designerId": "d1eb9159-528c-40c6-8395-83ba1eba5ba8",
            "cn": [
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "header": false,
                        "height": null,
                        "itemId": "PropertyContainer",
                        "layout": "fit",
                        "title": "Свойства"
                    },
                    "name": "MyPanel1",
                    "designerId": "0e70e144-da60-4c66-9913-9c10817ab6ef"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "SaveDiagramTemplate",
                "implHandler": [
                    "var mainContainer= this;",
                    "mainContainer.modified=false;",
                    "var StructureTree= mainContainer.down('#StructureTree') ;",
                    "var RootNode= StructureTree.getRootNode();",
                    "if(RootNode!= undefined){",
                    "    var Diagram_Template=mainContainer.DiagramObject.SaveDiagramNodeToJson(RootNode);",
                    "    Diagram_Template.id_Diagram=mainContainer.id_Diagram;",
                    "    Ext.MessageBox.wait({",
                    "        msg: 'Выполняется операция. Ждите...',",
                    "        width: 300,",
                    "        wait: true,",
                    "        waitConfig: {interval: 100}",
                    "    });",
                    "    DiagramTemplate_class.SaveDiagramTemplate(Diagram_Template,function(response, options) {",
                    "        Ext.MessageBox.hide();",
                    "        var result = response;",
                    "        if ((result.success === false) && (result.result == 're_connect')) {",
                    "            Ext.MessageBox.alert('Подключение',result.msg);",
                    "            window.onbeforeunload = null;",
                    "            findFirstWindow().window.location.href = __first_page;",
                    "            return;",
                    "        }",
                    "        if (result.success) {",
                    "            if((mainContainer.grid_ListDiagramTemplate)&&(mainContainer.grid_ListDiagramTemplate!=undefined)&&",
                    "               (mainContainer.grid_ListDiagramTemplate!=null)){",
                    "                mainContainer.grid_ListDiagramTemplate.getStore().load();",
                    "            }",
                    "            mainContainer.codeDiagramTemplate=Diagram_Template.Code;",
                    "            if (mainContainer.id_Diagram == undefined)",
                    "                mainContainer.id_Diagram = result.result.id_diagram_template;",
                    "            Ext.MessageBox.alert(\"Результат выполнения \", result.msg);",
                    "        } else {",
                    "            Ext.MessageBox.alert(\"Ошибка сохранения: \" , result.msg);",
                    "        }",
                    "    });",
                    "}",
                    ""
                ]
            },
            "name": "SaveDiagramTemplate",
            "designerId": "daa29537-b531-458a-b802-80bc87de8e0a"
        },
        {
            "type": "processcfgfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "config"
                ],
                "fn": "processDesignDiagramMainContainer",
                "implHandler": [
                    "config.MICaption_Diagram='Диаграмма';",
                    "config.MICaption_Chart='Ряд данных';",
                    "return(config);"
                ]
            },
            "name": "processDesignDiagramMainContainer",
            "designerId": "153f1b88-5a46-4113-84e6-4891608dbfcd"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "PreviewType"
                ],
                "fn": "PreviewTemplate",
                "implHandler": [
                    "var mainContainer= this;//button.findParentByType('#DesignDiagramMainContainer');",
                    "if (!mainContainer.isNew)",
                    "{",
                    "    mainContainer.SaveDiagramTemplate();",
                    "    mainContainer.DiagramObject.ComposeDiagramByTemplateInteractiveParamInput(null,",
                    "                                                                              {param_list:{code:mainContainer.codeDiagramTemplate,",
                    "         ParamValuesArray:{},",
                    "         PreviewMode:PreviewType",
                    "                                                                                          }",
                    "                                                                              });",
                    "}else",
                    "{Ext.MessageBox.alert('Ошибка сохранения','Сначала надо сохранить шаблон');}"
                ]
            },
            "name": "PreviewTemplate",
            "designerId": "0c39bd83-4c9e-4a9e-9458-8ac0ba7d93cb"
        }
    ]
}